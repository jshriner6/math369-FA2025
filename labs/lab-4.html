<!DOCTYPE html>
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<html lang="en-US" dir="ltr">
<!--******************************************-->
<!--*  Authored with PreTeXt                 *-->
<!--*  pretextbook.org                       *-->
<!--*  Theme: greeley                        *-->
<!--*  Palette:                              *-->
<!--******************************************-->
<head xmlns:og="http://ogp.me/ns#" xmlns:book="https://ogp.me/ns/book#">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Lab 4: Image Compression</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
<link href="_static/pretext/css/theme.css" rel="stylesheet" type="text/css">
<script>
var runestoneMathReady = new Promise((resolve) => window.rsMathReady = resolve);
window.MathJax = {
  "tex": {
    "inlineMath": [
      [
        "\\(",
        "\\)"
      ]
    ],
    "tags": "none",
    "tagSide": "right",
    "tagIndent": ".8em",
    "packages": {
      "[+]": [
        "base",
        "extpfeil",
        "ams",
        "amscd",
        "color",
        "newcommand",
        "knowl"
      ]
    }
  },
  "options": {
    "ignoreHtmlClass": "tex2jax_ignore|ignore-math",
    "processHtmlClass": "process-math"
  },
  "chtml": {
    "scale": 0.98,
    "mtextInheritFont": true
  },
  "loader": {
    "load": [
      "input/asciimath",
      "[tex]/extpfeil",
      "[tex]/amscd",
      "[tex]/color",
      "[tex]/newcommand",
      "[pretext]/mathjaxknowl3.js"
    ],
    "paths": {
      "pretext": "_static/pretext/js/lib"
    }
  },
  "startup": {
    pageReady() {
      return MathJax.startup.defaultPageReady().then(function () {
      console.log("in ready function");
      rsMathReady();
      }
    )}
  }
};
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:type" content="article">
<script src="_static/pretext/js/lib/jquery.min.js"></script><script src="_static/pretext/js/lib/jquery.sticky.js"></script><script src="_static/pretext/js/lib/jquery.espy.min.js"></script><script src="_static/pretext/js/pretext.js"></script><script src="_static/pretext/js/pretext_add_on.js?x=1"></script><script src="_static/pretext/js/user_preferences.js"></script><!--** eBookCongig is necessary to configure interactive       **-->
<!--** Runestone components to run locally in reader's browser **-->
<!--** No external communication:                              **-->
<!--**     log level is 0, Runestone Services are disabled     **-->
<script type="text/javascript">
eBookConfig = {};
eBookConfig.useRunestoneServices = false;
eBookConfig.host = 'http://127.0.0.1:8000';
eBookConfig.course = 'PTX_Course_Title_Here';
eBookConfig.basecourse = 'PTX_Base_Course';
eBookConfig.isLoggedIn = false;
eBookConfig.email = '';
eBookConfig.isInstructor = false;
eBookConfig.logLevel = 0;
eBookConfig.username = '';
eBookConfig.readings = null;
eBookConfig.activities = null;
eBookConfig.downloadsEnabled = false;
eBookConfig.allow_pairs = false;
eBookConfig.enableScratchAC = false;
eBookConfig.build_info = "";
eBookConfig.python3 = null;
eBookConfig.runestone_version = '7.9.13';
eBookConfig.jobehost = '';
eBookConfig.proxyuri_runs = '';
eBookConfig.proxyuri_files = '';
eBookConfig.enable_chatcodes =  false;
</script>
<!--*** Runestone Services ***-->
<script src="_static/prefix-runtime.9f7f6b353cd8c357.bundle.js"></script><script src="_static/prefix-723.3e6434f80549315a.bundle.js"></script><script src="_static/prefix-runestone.629fdbd852876870.bundle.js"></script><link rel="stylesheet" type="text/css" href="_static/prefix-723.3bccd435914aa0ff.css">
<link rel="stylesheet" type="text/css" href="_static/prefix-runestone.557d81b04b3ec0e4.css">
<script src="_static/pretext/js/lti_iframe_resizer.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js" integrity="sha512-4xUl/d6D6THrAnXAwGajXkoWaeMNwEKK4iNfq5DotEbLPAfk6FSxSP3ydNxqDgCw1c/0Z1Jg6L8h2j+++9BZmg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="lunr-pretext-search-index.js" async=""></script><script src="_static/pretext/js/pretext_search.js"></script><script src="_static/pretext/js/lib/knowl.js"></script><!--knowl.js code controls Sage Cells within knowls--><script>sagecellEvalName='Evaluate (Sage)';
</script>
</head>
<body class="pretext article ignore-math">
<a class="assistive" href="#ptx-content">Skip to main content</a><header id="ptx-masthead" class="ptx-masthead"><div class="ptx-banner"><div class="title-container">
<h1 class="heading"><a href="labs.html"><span class="title">Labs</span></a></h1>
<p class="byline"></p>
</div></div></header><nav id="ptx-navbar" class="ptx-navbar navbar"><div class="ptx-navbar-contents">
<button class="toc-toggle button" title="Contents"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5d2;</span><span class="name">Contents</span></button><div class="searchbox">
<div class="searchwidget"><button id="searchbutton" class="searchbutton button" type="button" title="Search book"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe8b6;</span><span class="name">Search Book</span></button></div>
<div id="searchresultsplaceholder" class="searchresultsplaceholder" style="display: none">
<div class="search-results-controls">
<input aria-label="Search term" id="ptxsearch" class="ptxsearch" type="text" name="terms" placeholder="Search term"><button title="Close search" id="closesearchresults" class="closesearchresults"><span class="material-symbols-outlined">close</span></button>
</div>
<h2 class="search-results-heading">Search Results: </h2>
<div id="searchempty" class="searchempty"><span>No results.</span></div>
<ol id="searchresults" class="searchresults"></ol>
</div>
</div>
<span class="nav-other-controls"><button id="embed-button" class="embed-button button" title="Embed this page"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe86f;</span><span class="name">Embed</span></button><div class="embed-popup hidden" id="embed-popup">
<p>Copy the code below to embed this page in your own website or LMS page.</p>
<div class="embed-code-container">
<textarea class="embed-code-textbox" id="embed-code-textbox" readonly aria-label="textbox"><iframe src="https://example.com/embed" width="100%" height="1000"></iframe></textarea><button class="copy-embed-button button" id="copy-embed-button" title="Copy embed code"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe14d;</span><span class="name">Copy</span></button>
</div>
</div>
<button id="light-dark-button" class="light-dark-button button" title="Dark Mode"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe51c;</span><span class="name">Dark Mode</span></button></span><span class="treebuttons"><a class="previous-button button" href="lab-3.html" title="Previous"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cb;</span><span class="name">Prev</span></a><a class="up-button button" href="labs.html" title="Up"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5ce;</span><span class="name">Up</span></a><span class="next-button button disabled"><span class="name">Next</span><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cc;</span></span></span>
</div></nav><div id="latex-macros" class="hidden-content process-math" style="display:none"><span class="process-math">\(\newcommand{\N}{\mathbb N}
\newcommand{\Z}{\mathbb Z}
\newcommand{\Q}{\mathbb Q}
\newcommand{\R}{\mathbb R}
\newcommand{\bvec}{{\mathbf b}}
\newcommand{\evec}{{\mathbf e}}
\newcommand{\fvec}{{\mathbf f}}
\newcommand{\nvec}{{\mathbf n}}
\newcommand{\pvec}{{\mathbf p}}
\newcommand{\qvec}{{\mathbf q}}
\newcommand{\svec}{{\mathbf s}}
\newcommand{\tvec}{{\mathbf t}}
\newcommand{\uvec}{{\mathbf u}}
\newcommand{\vvec}{{\mathbf v}}
\newcommand{\wvec}{{\mathbf w}}
\newcommand{\xvec}{{\mathbf x}}
\newcommand{\yvec}{{\mathbf y}}
\newcommand{\zvec}{{\mathbf z}}
\newcommand{\rvec}{{\mathbf r}}
\newcommand{\mvec}{{\mathbf m}}
\newcommand{\zerovec}{{\mathbf 0}}
\newcommand{\onevec}{{\mathbf 1}}
\newcommand{\twovec}[2]{\left[\begin{array}{r}#1 \\ #2
\end{array}\right]}
\newcommand{\ctwovec}[2]{\left[\begin{array}{c}#1 \\ #2
\end{array}\right]}
\newcommand{\threevec}[3]{\left[\begin{array}{r}#1 \\ #2 \\ #3
\end{array}\right]}
\newcommand{\cthreevec}[3]{\left[\begin{array}{c}#1 \\ #2 \\ #3
\end{array}\right]}
\newcommand{\fourvec}[4]{\left[\begin{array}{r}#1 \\ #2 \\ #3 \\ #4
\end{array}\right]}
\newcommand{\cfourvec}[4]{\left[\begin{array}{c}#1 \\ #2 \\ #3 \\ #4
\end{array}\right]}
\newcommand{\fivevec}[5]{\left[\begin{array}{r}#1 \\ #2 \\ #3 \\
#4 \\ #5 \\ \end{array}\right]}
\newcommand{\cfivevec}[5]{\left[\begin{array}{c}#1 \\ #2 \\ #3 \\
#4 \\ #5 \\ \end{array}\right]}

\newcommand{\laspan}[1]{\text{Span}\{#1\}}
 \newcommand{\real}{{\mathbb R}}

 \newcommand{\bcal}{{\cal B}}
\newcommand{\ccal}{{\cal C}}
\newcommand{\scal}{{\cal S}}
\newcommand{\wcal}{{\cal W}}
\newcommand{\ecal}{{\cal E}}
 \newcommand{\coords}[2]{\left\{#1\right\}_{#2}}
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\definecolor{fillinmathshade}{gray}{0.9}
\newcommand{\fillinmath}[1]{\mathchoice{\colorbox{fillinmathshade}{$\displaystyle     \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\textstyle        \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptstyle      \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptscriptstyle\phantom{\,#1\,}$}}}
\)</span></div>
<div class="ptx-page">
<div id="ptx-sidebar" class="ptx-sidebar"><nav id="ptx-toc" class="ptx-toc depth1"><ul class="structural toc-item-list contains-active">
<li class="toc-item toc-worksheet"><div class="toc-title-box"><a href="lab-1.html" class="internal"><span class="title">Lab 1: Systems of Equations</span></a></div></li>
<li class="toc-item toc-worksheet"><div class="toc-title-box"><a href="lab-2.html" class="internal"><span class="title">Lab 2: Markov Chains</span></a></div></li>
<li class="toc-item toc-worksheet"><div class="toc-title-box"><a href="lab-3.html" class="internal"><span class="title">Lab 3: Computer Animation</span></a></div></li>
<li class="toc-item toc-worksheet active"><div class="toc-title-box"><a href="lab-4.html" class="internal"><span class="title">Lab 4: Image Compression</span></a></div></li>
</ul></nav></div>
<main class="ptx-main"><div id="ptx-content" class="ptx-content"><section class="worksheet" id="lab-4" data-margins="1in 1in 1.25cm 1in"><h2 class="heading hide-type">
<span class="type">Worksheet</span><span class="space heading-divison-mark heading-divison-mark__space"> </span><span class="codenumber"></span><span class="space heading-divison-mark heading-divison-mark__space"> </span><span class="title">Lab 4: Image Compression</span><div class="print-links"><a href="lab-4-printable.html" class="print-link" title="Print preview"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe8ad;</span></a></div>
</h2>
<section class="onepage" id="lab-4-2"><div class="introduction" id="lab-4-2-1">
<div class="para" id="lab-4-2-1-1">Complete the following exercises in groups of 2 or 3 students including complete explanations of your work.  You should write directly on this handout (if additional pages are necessary, please make sure they are well-organized), and you only need to submit one report to Gradescope.  Make sure you indicate everyone in your group in your submission to Gradescope.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-2-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="para" id="lab-4-2-1-2">As introduced in class, we are going to study the luminance values in an <span class="process-math">\(8 \times 8\)</span> block of pixels from a digital photo taken in Capitol Reef National Park. <div class="sidebyside"><div class="sbsrow" style="margin-left:10%;margin-right:10%;grid-template-columns:37.5% 37.5%;column-gap:20%;">
<div class="sbspanel sbspanel--top top" style=""><img src="external/grayscale.png" class="contained" alt="An eight by eight grid of gray pixels."></div>
<div class="sbspanel sbspanel--top top" style=""><img src="external/luminance.png" class="contained" alt="An eight by eight grid showing the luminance values of each pixel."></div>
</div></div>
<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-2-1-2" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="para logical" id="lab-4-2-1-3">
<div class="para">To begin, we’ll consider the first column of luminance values, which is the 8-dimensional vector</div>
<div class="displaymath process-math">
\begin{equation*}
\xvec = \left[\begin{array}{c}
176 \\ 181 \\ 165 \\ \vdots \\ 150 \\
\end{array}\right]\text{.}
\end{equation*}
</div>
<div class="para">represented graphically as <div class="image-box" style="width: 30%; margin-left: 35%; margin-right: 35%;"><img src="external/xvec.png" class="contained" alt="Graph of the components of the vector x."></div> Two things are important:</div>
<ul class="disc" id="lab-4-2-1-3-3">
<li id="lab-4-2-1-3-3-1">
<div class="para" id="lab-4-2-1-3-3-1-1">There are not rapid variations in these numbers within the column.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-2-1-3-3-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="autopermalink" data-description="Item"><a href="#lab-4-2-1-3-3-1" title="Copy heading and permalink for Item" aria-label="Copy heading and permalink for Item">🔗</a></div>
</li>
<li id="lab-4-2-1-3-3-2">
<div class="para" id="lab-4-2-1-3-3-2-1">If some of the values were to change slightly, our eyes would probably not notice because the pixels, when represented on a screen, are so small.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-2-1-3-3-2-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="autopermalink" data-description="Item"><a href="#lab-4-2-1-3-3-2" title="Copy heading and permalink for Item" aria-label="Copy heading and permalink for Item">🔗</a></div>
</li>
</ul>
<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-2-1-3" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="para" id="lab-4-2-1-4">In the daily prep, we encountered the Fourier basis consisting of vectors <span class="process-math">\(\vvec_0, \dots, \vvec_7\text{,}\)</span> and the vector <span class="process-math">\(\fvec = \coords{\xvec}{\bcal}\)</span> consisting of the Fourier coefficients <span class="process-math">\(F_0,F_1, \dots, F_7\text{.}\)</span><div class="autopermalink" data-description="Paragraph"><a href="#lab-4-2-1-4" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="para" id="lab-4-2-1-5">There is a <a class="external" href="http://gvsu.edu/s/0RF" target="_blank">page of Sage cells</a> to use for this lab. Be sure to evaluate the first cell and then use the rest of the cells to complete your work. This cell will load the <span class="process-math">\(8\times 8\)</span> matrix <span class="process-math">\(P\text{,}\)</span> whose columns are the vectors <span class="process-math">\(\vvec_0, \dots, \vvec_7\text{,}\)</span> as well as the vector <span class="process-math">\(\xvec\)</span> shown above and the <span class="process-math">\(8\times 8\)</span> matrix of luminance values called <dfn class="terminology">luminance</dfn>.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-2-1-5" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
</div></section><section class="onepage" id="lab-4-3"><article class="exercise exercise-like" id="lab-4-3-1"><h3 class="heading"><span class="codenumber">1<span class="period heading-divison-mark heading-divison-mark__period">.</span></span></h3>
<article class="task exercise-like" id="lab-4-3-1-1"><h4 class="heading"><span class="codenumber">(a)</span></h4>
<div class="para" id="lab-4-3-1-1-1-1">Describe in words how to convert the vector <span class="process-math">\(\xvec\)</span> into the vector <span class="process-math">\(\fvec\)</span> of Fourier coefficients and, conversely, how to convert <span class="process-math">\(\fvec\)</span> back into <span class="process-math">\(\xvec\text{.}\)</span><div class="autopermalink" data-description="Paragraph"><a href="#lab-4-3-1-1-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="2in"></div>
<div class="autopermalink" data-description="Task 1.a"><a href="#lab-4-3-1-1" title="Copy heading and permalink for Task 1.a" aria-label="Copy heading and permalink for Task 1.a">🔗</a></div></article><article class="task exercise-like" id="lab-4-3-1-2"><h4 class="heading"><span class="codenumber">(b)</span></h4>
<div class="para" id="lab-4-3-1-2-1-1">Find the vector <span class="process-math">\(\fvec\)</span> using the page of Sage cells provided, take a screenshot of it, and paste it below.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-3-1-2-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="2in"></div>
<div class="autopermalink" data-description="Task 1.b"><a href="#lab-4-3-1-2" title="Copy heading and permalink for Task 1.b" aria-label="Copy heading and permalink for Task 1.b">🔗</a></div></article><article class="task exercise-like" id="lab-4-3-1-3"><h4 class="heading"><span class="codenumber">(c)</span></h4>
<div class="para" id="lab-4-3-1-3-1-1">What does the relative size of the Fourier coefficients tell us about the relative contributions of the basis vectors <span class="process-math">\(\vvec_0, \dots, \vvec_7\)</span> to the vector <span class="process-math">\(\xvec\text{?}\)</span>  How is your observation consistent with the fact that “there are not rapid variations” in the vector <span class="process-math">\(\xvec\text{?}\)</span><div class="autopermalink" data-description="Paragraph"><a href="#lab-4-3-1-3-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="3in"></div>
<div class="autopermalink" data-description="Task 1.c"><a href="#lab-4-3-1-3" title="Copy heading and permalink for Task 1.c" aria-label="Copy heading and permalink for Task 1.c">🔗</a></div></article><div class="autopermalink" data-description="Worksheet Exercise 1"><a href="#lab-4-3-1" title="Copy heading and permalink for Worksheet Exercise 1" aria-label="Copy heading and permalink for Worksheet Exercise 1">🔗</a></div></article></section><section class="onepage" id="lab-4-4"><article class="exercise exercise-like" id="lab-4-4-1"><h3 class="heading"><span class="codenumber">2<span class="period heading-divison-mark heading-divison-mark__period">.</span></span></h3>
<div class="introduction" id="lab-4-4-1-1"><div class="para" id="lab-4-4-1-1-1">Now form a new vector <span class="process-math">\(\fvec_{\text{approx}}\text{,}\)</span> which is formed from <span class="process-math">\(\fvec\)</span> by rounding the Fourier coefficients to the nearest integers and setting the last two Fourier coefficients to zero. In other words, we are only saving <span class="process-math">\(6\)</span> of the <span class="process-math">\(8\)</span> Fourier coefficients, or <span class="process-math">\(75\%\)</span> of them.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-4-1-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div></div>
<article class="task exercise-like" id="lab-4-4-1-2"><h4 class="heading"><span class="codenumber">(a)</span></h4>
<div class="para" id="lab-4-4-1-2-1-1">Find <span class="process-math">\(\xvec_{\text{approx}}\text{,}\)</span> an approximation to the vector <span class="process-math">\(\xvec\)</span> formed by the approximate Fourier coefficients <span class="process-math">\(\fvec_{\text{approx}}\text{.}\)</span> Describe the vector <span class="process-math">\(\fvec_{\text{approx}}\)</span> and how you found <span class="process-math">\(\xvec_{\text{approx}}\text{.}\)</span> Then paste a screenshot of <span class="process-math">\(\xvec_{\text{approx}}\)</span> below. (Remember that you can define a vector in Sage as <code class="code-inline tex2jax_ignore">v = vector([2, 1])</code>.)<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-4-1-2-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="3in"></div>
<div class="autopermalink" data-description="Task 2.a"><a href="#lab-4-4-1-2" title="Copy heading and permalink for Task 2.a" aria-label="Copy heading and permalink for Task 2.a">🔗</a></div></article><article class="task exercise-like" id="lab-4-4-1-3"><h4 class="heading"><span class="codenumber">(b)</span></h4>
<div class="para" id="lab-4-4-1-3-1-1">Paste a screen shot of <span class="process-math">\(\xvec-\xvec_{\text{approx}}\text{,}\)</span> and describe what this measures.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-4-1-3-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="3in"></div>
<div class="autopermalink" data-description="Task 2.b"><a href="#lab-4-4-1-3" title="Copy heading and permalink for Task 2.b" aria-label="Copy heading and permalink for Task 2.b">🔗</a></div></article><article class="task exercise-like" id="lab-4-4-1-4"><h4 class="heading"><span class="codenumber">(c)</span></h4>
<div class="para" id="lab-4-4-1-4-1-1">Here’s the main idea: we have saved only <span class="process-math">\(75\%\)</span> of the Fourier coefficients, but when we reconstruct the visual information in the vector <span class="process-math">\(\xvec\text{,}\)</span> the error is pretty small and probably not visible to the human eye (remember that the components of <span class="process-math">\(\xvec\)</span> can vary between <span class="process-math">\(0\)</span> and <span class="process-math">\(255\)</span>).  We say that the <dfn class="terminology">compression ratio</dfn> is <span class="process-math">\(75\%\text{.}\)</span> Let’s try again saving only the four largest Fourier coefficients (a compression ratio of <span class="process-math">\(50\%\)</span>); that is, form a new <span class="process-math">\(\fvec_{\text{approx}}\)</span> by setting the four smallest Fourier coefficients to zero. Paste a screen shot of the new value of <span class="process-math">\(\xvec-\xvec_{\text{approx}}\text{.}\)</span> Describe its relationship to what you obtained in the previous question, and why this makes sense.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-4-1-4-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="2in"></div>
<div class="autopermalink" data-description="Task 2.c"><a href="#lab-4-4-1-4" title="Copy heading and permalink for Task 2.c" aria-label="Copy heading and permalink for Task 2.c">🔗</a></div></article><div class="autopermalink" data-description="Worksheet Exercise 2"><a href="#lab-4-4-1" title="Copy heading and permalink for Worksheet Exercise 2" aria-label="Copy heading and permalink for Worksheet Exercise 2">🔗</a></div></article></section><section class="onepage" id="lab-4-5"><article class="exercise exercise-like" id="lab-4-5-1"><h3 class="heading"><span class="codenumber">3<span class="period heading-divison-mark heading-divison-mark__period">.</span></span></h3>
<div class="introduction" id="lab-4-5-1-1"><div class="para" id="lab-4-5-1-1-1">We can, in fact, do better.  Let’s return to the <span class="process-math">\(8 \times 8\)</span> block of luminance values on page 1 of this document. Each column of luminance values forms an 8-dimensional vector, the first of which we studied already.  If <span class="process-math">\(\xvec_i\)</span> is the <span class="process-math">\(i^{th}\)</span> column of the luminance matrix, then we can find its corresponding vector <span class="process-math">\(\fvec_i\)</span> of Fourier coefficients.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-5-1-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div></div>
<article class="task exercise-like" id="lab-4-5-1-2"><h4 class="heading"><span class="codenumber">(a)</span></h4>
<div class="para" id="lab-4-5-1-2-1-1">Find the <span class="process-math">\(8 \times 8\)</span> matrix whose columns are the vectors <span class="process-math">\(\fvec_0, \fvec_1, \dots, \fvec_7\)</span> and paste a screenshot of your results in the space below.  Include a description of how you found this matrix. This may sound daunting at first, but remember how matrix-matrix multiplication works, and that you have the <span class="process-math">\(8 \times 8\)</span> matrix <dfn class="terminology">luminance</dfn> of luminance values available on your page of Sage cells.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-5-1-2-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="3in"></div>
<div class="autopermalink" data-description="Task 3.a"><a href="#lab-4-5-1-2" title="Copy heading and permalink for Task 3.a" aria-label="Copy heading and permalink for Task 3.a">🔗</a></div></article><article class="task exercise-like" id="lab-4-5-1-3"><h4 class="heading"><span class="codenumber">(b)</span></h4>
<div class="para" id="lab-4-5-1-3-1-1">As you scan across a row, take the first row, for instance, you’ll see that the values don’t change wildly. So maybe we can also Fourier transform the rows of the matrix of Fourier coefficients. Define the 8-dimensional vector <span class="process-math">\(\yvec\)</span> consisting of the rounded values of the first row of the Fourier coefficient matrix and then find its Fourier coefficients <span class="process-math">\(\coords{\yvec}{\bcal}\text{.}\)</span>  Paste a screenshot of <span class="process-math">\(\coords{\yvec}{\bcal}\)</span> below. What do you notice about the relative size of these Fourier coefficients?<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-5-1-3-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="2in"></div>
<div class="autopermalink" data-description="Task 3.b"><a href="#lab-4-5-1-3" title="Copy heading and permalink for Task 3.b" aria-label="Copy heading and permalink for Task 3.b">🔗</a></div></article><div class="autopermalink" data-description="Worksheet Exercise 3"><a href="#lab-4-5-1" title="Copy heading and permalink for Worksheet Exercise 3" aria-label="Copy heading and permalink for Worksheet Exercise 3">🔗</a></div></article></section><section class="onepage" id="lab-4-6"><article class="exercise exercise-like" id="lab-4-6-1"><h3 class="heading"><span class="codenumber">4<span class="period heading-divison-mark heading-divison-mark__period">.</span></span></h3>
<div class="introduction" id="lab-4-6-1-1"><div class="para" id="lab-4-6-1-1-1">Transforming the rows of a Fourier coefficient matrix is called the <dfn class="terminology">double Fourier transform</dfn>, and there’s a Sage function, <code class="code-inline tex2jax_ignore">double_fourier( luminance )</code>, that can do this for you from the original luminance values.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-6-1-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div></div>
<article class="task exercise-like" id="lab-4-6-1-2"><h4 class="heading"><span class="codenumber">(a)</span></h4>
<div class="para" id="lab-4-6-1-2-1-1">Give the matrix obtained after a double Fourier transform a name, and paste a screenshot of it below. What do you notice about the size of the entries of this matrix?<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-6-1-2-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="2in"></div>
<div class="autopermalink" data-description="Task 4.a"><a href="#lab-4-6-1-2" title="Copy heading and permalink for Task 4.a" aria-label="Copy heading and permalink for Task 4.a">🔗</a></div></article><article class="task exercise-like" id="lab-4-6-1-3"><h4 class="heading"><span class="codenumber">(b)</span></h4>
<div class="para" id="lab-4-6-1-3-1-1">There is another command <code class="code-inline tex2jax_ignore">round_matrix( matrix_name, minimum )</code> that will round the entries in the given matrix to the nearest integer and set any entries whose absolute value is smaller than minimum to zero. For instance, <code class="code-inline tex2jax_ignore">round_matrix( A, 4 )</code> will round the entries of <span class="process-math">\(A\)</span> and set any entries in the range from -3 to 3 equal to zero. Round the matrix of double Fourier coefficients with a minimum value of 4 and paste your result below. How many non-zero double Fourier coefficients are left?  What is the compression ratio? (The non-zero entries are the only ones that we need to save, so the ratio of the number of non-zero double Fourier coefficients to 64 represents the compression ratio.)<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-6-1-3-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="3in"></div>
<div class="autopermalink" data-description="Task 4.b"><a href="#lab-4-6-1-3" title="Copy heading and permalink for Task 4.b" aria-label="Copy heading and permalink for Task 4.b">🔗</a></div></article><div class="autopermalink" data-description="Worksheet Exercise 4"><a href="#lab-4-6-1" title="Copy heading and permalink for Worksheet Exercise 4" aria-label="Copy heading and permalink for Worksheet Exercise 4">🔗</a></div></article></section><section class="onepage" id="lab-4-7"><article class="exercise exercise-like" id="lab-4-7-1"><h3 class="heading"><span class="codenumber">5<span class="period heading-divison-mark heading-divison-mark__period">.</span></span></h3>
<div class="introduction" id="lab-4-7-1-1"><div class="para" id="lab-4-7-1-1-1">There is a final command, <code class="code-inline tex2jax_ignore">inverse_double_fourier( matrix_name )</code>, that will reconstruct the luminance values from the rounded double Fourier coefficients.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-7-1-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div></div>
<article class="task exercise-like" id="lab-4-7-1-2"><h4 class="heading"><span class="codenumber">(a)</span></h4>
<div class="para" id="lab-4-7-1-2-1-1">Find this reconstruction and paste it below.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-7-1-2-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="2in"></div>
<div class="autopermalink" data-description="Task 5.a"><a href="#lab-4-7-1-2" title="Copy heading and permalink for Task 5.a" aria-label="Copy heading and permalink for Task 5.a">🔗</a></div></article><article class="task exercise-like" id="lab-4-7-1-3"><h4 class="heading"><span class="codenumber">(b)</span></h4>
<div class="para" id="lab-4-7-1-3-1-1">Compute a matrix that represents the error between the original luminance values and the reconstructed values, and paste it below.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-7-1-3-1-1" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div>
<div class="workspace" data-space="2in"></div>
<div class="autopermalink" data-description="Task 5.b"><a href="#lab-4-7-1-3" title="Copy heading and permalink for Task 5.b" aria-label="Copy heading and permalink for Task 5.b">🔗</a></div></article><div class="autopermalink" data-description="Worksheet Exercise 5"><a href="#lab-4-7-1" title="Copy heading and permalink for Worksheet Exercise 5" aria-label="Copy heading and permalink for Worksheet Exercise 5">🔗</a></div></article><div class="para" id="lab-4-7-2">Notice that we have only saved about <span class="process-math">\(12\%\)</span> of the Fourier coefficients yet we are able to reconstruct the luminance values with a relatively small error. When you take a picture with your phone, the software saves the rounded double Fourier coefficients of each <span class="process-math">\(8 \times 8\)</span> block of pixels, which represents only a small fraction of the information. When you want to view a picture, the software reconstructs the image from the saved double Fourier coefficients with a relatively small error. Most photo editing programs allow you to choose the compression ratio (quality setting), which is controlled by the range of Fourier coefficients we save.<div class="autopermalink" data-description="Paragraph"><a href="#lab-4-7-2" title="Copy heading and permalink for Paragraph" aria-label="Copy heading and permalink for Paragraph">🔗</a></div>
</div></section><div class="autopermalink" data-description="Worksheet: Lab 4: Image Compression"><a href="#lab-4" title="Copy heading and permalink for Worksheet: Lab 4: Image Compression" aria-label="Copy heading and permalink for Worksheet: Lab 4: Image Compression">🔗</a></div></section></div>
<div id="ptx-content-footer" class="ptx-content-footer">
<a class="previous-button button" href="lab-3.html" title="Previous"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cb;</span><span class="name">Prev</span></a><a class="top-button button" href="#" title="Top"><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5ce;</span><span class="name">Top</span></a><span class="next-button button disabled"><span class="name">Next</span><span class="icon material-symbols-outlined" aria-hidden="true">&#xe5cc;</span></span>
</div></main>
</div>
<div id="ptx-page-footer" class="ptx-page-footer">
<a class="pretext-link" href="https://pretextbook.org" title="PreTeXt"><div class="logo"><svg xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="338 3000 8772 6866" role="img"><title>PreTeXt logo</title><g style="stroke-width:.025in; stroke:currentColor; fill:none"><polyline points="472,3590 472,9732 " style="stroke-width:174; stroke-linejoin:miter; stroke-linecap:round; "></polyline><path style="stroke-width:126;stroke-linecap:butt;" d="M 4724,9448 A 4660 4660  0  0  1  8598  9259"></path><path style="stroke-width:174;stroke-linecap:butt;" d="M 4488,9685 A 4228 4228  0  0  0   472  9732"></path><path style="stroke-width:126;stroke-linecap:butt;" d="M 4724,3590 A 4241 4241  0  0  1  8598  3496"></path><path style="stroke-width:126;stroke-linecap:round;" d="M 850,3496  A 4241 4241  0  0  1  4724  3590"></path><path style="stroke-width:126;stroke-linecap:round;" d="M 850,9259  A 4507 4507  0  0  1  4724  9448"></path><polyline points="5385,4299 4062,8125" style="stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8598,3496 8598,9259" style="stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="850,3496 850,9259" style="stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="4960,9685 4488,9685" style="stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="3070,4582 1889,6141 3070,7700" style="stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="6418,4582 7600,6141 6418,7700" style="stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8976,3590 8976,9732" style="stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><path style="stroke-width:174;stroke-linecap:butt;" d="M 4960,9685 A 4228 4228  0  0  1  8976  9732"></path></g></svg></div></a><a class="runestone-link" href="https://runestone.academy" title="Runestone Academy"><img class="logo" src="https://runestone.academy/runestone/static/images/RAIcon_cropped.png" alt="Runstone Academy logo"></a><a class="mathjax-link" href="https://www.mathjax.org" title="MathJax"><img class="logo" src="https://www.mathjax.org/badge/badge-square-2.png" alt="MathJax logo"></a>
</div>
</body>
</html>
